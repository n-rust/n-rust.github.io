<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
  <link rel="shortcut icon" href="assets/images/photo-2026-01-10-21-31-22-removebg-preview-128x128-1.png" type="image/x-icon">
  <meta name="description" content="Онлайн-статистика сервера Naturerust в реальном времени">
  
  <title>Статистика сервера | Naturerust.ru</title>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-grid.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-reboot.min.css">
  <link href="https://fonts.googleapis.com/css?family=Jost:100,200,300,400,500,600,700,800,900&display=swap" rel="stylesheet">
  
  <style>
    body, html {
      background-color: #1a1a1a;
      color: #e0e0e0;
      font-family: 'Jost', sans-serif;
      height: 100%;
    }

    section, .content-wrapper, .cid-s0 {
      background-color: #1a1a1a !important;
    }

    .server-status-header {
      background: linear-gradient(180deg, #222 0%, #1a1a1a 100%);
      padding: 30px 0 10px;
      text-align: center;
      margin-bottom: 20px;
    }

    .header-logo {
      height: 90px;
      width: auto;
      margin-bottom: 10px;
      filter: drop-shadow(0 0 15px rgba(255,255,255,0.05));
    }

    .server-title {
      font-size: 2.2rem;
      font-weight: 700;
      color: #fff;
      margin-bottom: 5px;
    }

    .online-badge {
      background: #252525;
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      padding: 10px 30px;
      border-radius: 16px;
      border: 1px solid #333;
      margin-top: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    }

    .online-count-text {
      font-size: 2rem;
      font-weight: 800;
      color: #4CAF50;
      line-height: 1;
    }
    
    .online-subtext {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: #888;
      margin-top: 5px;
    }

    .server-stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: #252525;
      border: 1px solid #333;
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .stat-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: #fff;
    }

    .stat-label {
      color: #aaa;
      font-size: 0.8rem;
      text-transform: uppercase;
      margin-top: 5px;
    }
    
    .stat-label i { color: #667eea; margin-right: 5px; }

    .info-card {
      background: #252525;
      border: 1px solid #333;
      border-radius: 10px;
      padding: 25px;
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .info-card-title {
      color: #fff;
      font-size: 1.1rem;
      font-weight: 600;
      padding-bottom: 15px;
      margin-bottom: 15px;
      border-bottom: 1px solid #333;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .info-card-title i { color: #667eea; }

    .info-row {
      display: flex;
      justify-content: space-between;
      padding: 12px 0;
      border-bottom: 1px dashed #333;
      font-size: 0.95rem;
    }
    .info-row:last-child { border-bottom: none; }

    .info-label { color: #aaa; }
    .info-value { color: #fff; font-weight: 500; text-align: right; }

    .status-badge {
      padding: 2px 10px;
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 700;
      text-transform: uppercase;
    }
    .status-online { background: #1b5e20; color: #a5d6a7; }
    .status-offline { background: #b71c1c; color: #ffcdd2; }

    .desc-card {
      background: #252525;
      border: 1px solid #333;
      border-radius: 10px;
      padding: 20px;
      margin-top: 25px;
    }
    .desc-text {
      color: #ccc;
      font-size: 0.9rem;
      line-height: 1.6;
    }

    .controls-bar {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 30px;
    }

    .btn-custom {
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.9rem;
      transition: transform 0.2s;
    }
    .btn-custom:hover { transform: translateY(-2px); }

    .btn-connect { background: #43a047; }
    .btn-copy { background: #667eea; }
    .btn-refresh { background: #424242; }

    .footer-section {
      background-color: #151515;
      padding: 30px 0;
      margin-top: 50px;
      border-top: 1px solid #222;
      text-align: center;
    }
    .social-icons a {
      color: #666;
      font-size: 1.5rem;
      margin: 0 10px;
      transition: color 0.3s;
    }
    .social-icons a:hover { color: #fff; }
    .copyright { color: #555; font-size: 0.85rem; margin-top: 15px; }

    @media (max-width: 768px) {
      .controls-bar { flex-wrap: wrap; }
      .btn-custom { width: 100%; justify-content: center; }
    }
  </style>
</head>
<body>

  <header class="server-status-header">
    <div class="container">
      <img src="assets/images/photo-2026-01-10-21-31-22-removebg-preview-96x96.png" alt="Logo" class="header-logo">
      <h1 class="server-title">Naturerust Server</h1>
      <div style="color: #666;">Мониторинг статистики в реальном времени</div>
      
      <div class="online-badge">
        <div class="online-count-text">
          <span id="online-count">0</span> / <span id="max-count">150</span>
        </div>
        <div class="online-subtext">Игроков онлайн</div>
      </div>
    </div>
  </header>

  <section class="content-wrapper">
    <div class="container">
      
      <div class="controls-bar">
        <button id="connect-btn" class="btn-custom btn-connect">
          <i class="fas fa-play"></i> Подключиться к серверу
        </button>
        <button id="copy-btn" class="btn-custom btn-copy">
          <i class="fas fa-copy"></i> Копировать IP
        </button>
        <button id="refresh-btn" class="btn-custom btn-refresh">
          <i class="fas fa-sync-alt"></i>
        </button>
      </div>

      <div class="server-stats-grid">
        <div class="stat-card">
          <div class="stat-value" id="fps-stat">0</div>
          <div class="stat-label"><i class="fas fa-tachometer-alt"></i> FPS Сервера</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="ping-stat">—</div>
          <div class="stat-label"><i class="fas fa-signal"></i> Пинг</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="entities-stat">0</div>
          <div class="stat-label"><i class="fas fa-cubes"></i> Сущности</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="world-size">0</div>
          <div class="stat-label"><i class="fas fa-expand-alt"></i> Размер мира</div>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-6 mb-4">
          <div class="info-card">
            <div class="info-card-title">
              <i class="fas fa-server"></i> Информация
            </div>
            
            <div class="info-row">
              <span class="info-label">Статус:</span>
              <span id="server-status" class="status-badge status-offline">...</span>
            </div>
            <div class="info-row">
              <span class="info-label">Название:</span>
              <span id="server-name" class="info-value">Загрузка...</span>
            </div>
            <div class="info-row">
              <span class="info-label">IP адрес:</span>
              <span id="server-ip" class="info-value">Загрузка...</span>
            </div>
            <div class="info-row">
              <span class="info-label">Карта:</span>
              <span id="server-map" class="info-value">...</span>
            </div>
            <div class="info-row">
              <span class="info-label">Защита (VAC):</span>
              <span id="server-secured" class="info-value">...</span>
            </div>
          </div>
        </div>

        <div class="col-lg-6 mb-4">
          <div class="info-card">
            <div class="info-card-title">
              <i class="fas fa-gamepad"></i> Геймплей
            </div>
            
            <div class="info-row">
              <span class="info-label">Игроки онлайн:</span>
              <span id="players-online" class="info-value">0 / 0</span>
            </div>
            <div class="info-row">
              <span class="info-label">Боты:</span>
              <span id="server-bots" class="info-value">0</span>
            </div>
            <div class="info-row">
              <span class="info-label">Дата вайпа:</span>
              <span id="server-wipe" class="info-value" style="color: #ff9800;">...</span>
            </div>
            <div class="info-row">
              <span class="info-label">Режим:</span>
              <span id="gamemode" class="info-value">Survival</span>
            </div>
            <div class="info-row">
              <span class="info-label">Сид мира:</span>
              <span id="world-seed" class="info-value">...</span>
            </div>
             <div class="info-row">
              <span class="info-label">API Статус:</span>
              <span id="api-status" class="info-value" style="color:#4CAF50">OK</span>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <div class="desc-card">
             <div class="info-card-title" style="border:none; margin:0; padding-bottom:5px">
               <i class="fas fa-quote-left"></i> Описание сервера
             </div>
             <div class="desc-text" id="server-description">
               Загрузка описания...
             </div>
             <div style="margin-top: 10px; font-size: 0.8rem; color: #555;">
               ID: 10310230 | Обновлено: <span id="last-updated">—</span>
             </div>
          </div>
        </div>
      </div>

    </div>
  </section>

  <footer class="footer-section">
    <div class="container">
      <div class="social-icons">
        <a href="https://t.me/nature_rust" target="_blank"><i class="fab fa-telegram"></i></a>
        <a href="mailto:support@naturerust.ru"><i class="fas fa-envelope"></i></a>
        <a href="https://www.battlemetrics.com/servers/rust/35699109" target="_blank"><i class="fas fa-chart-bar"></i></a>
      </div>
      <p class="copyright">
        2024-2026 | Naturerust™ | All Rights Reserved. | by Roxera™
      </p>
    </div>
  </footer>

  <script>
    const els = {
      status: document.getElementById('server-status'),
      name: document.getElementById('server-name'),
      ip: document.getElementById('server-ip'),
      map: document.getElementById('server-map'),
      online: document.getElementById('players-online'),
      count: document.getElementById('online-count'),
      max: document.getElementById('max-count'),
      fps: document.getElementById('fps-stat'),
      ent: document.getElementById('entities-stat'),
      size: document.getElementById('world-size'),
      desc: document.getElementById('server-description'),
      wipe: document.getElementById('server-wipe'),
      seed: document.getElementById('world-seed'),
      mode: document.getElementById('gamemode'),
      bots: document.getElementById('server-bots'),
      secure: document.getElementById('server-secured'),
      update: document.getElementById('last-updated')
    };

    function formatDate(ts) {
      if (!ts) return '-';
      return new Date(ts * 1000).toLocaleDateString('ru-RU');
    }

    function cleanText(text) {
      if (!text) return 'Нет описания';
      let clean = text.replace(/!\[.*?\]\(.*?\)/g, '');
      clean = clean.replace(/<[^>]*>/g, '');
      return clean.trim() || 'Нет текстового описания';
    }

    async function fetchData() {
      const url = 'https://api.gamemonitoring.ru/servers/10310230';
      try {
        let data;
        try {
          const res = await fetch(url);
          if(res.ok) data = await res.json();
        } catch(e) {
          // Прокси
          const pRes = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(url)}`);
          const pData = await pRes.json();
          data = JSON.parse(pData.contents);
        }

        if(data && data.response) {
          render(data.response);
        }
      } catch(err) {
        console.error('Err:', err);
      }
    }

    function render(s) {
      const isOn = s.status === true;
      els.status.textContent = isOn ? 'ONLINE' : 'OFFLINE';
      els.status.className = `status-badge ${isOn ? 'status-online' : 'status-offline'}`;

      els.name.textContent = s.name;
      els.ip.textContent = s.connect || `${s.ip}:${s.port}`;
      els.map.textContent = s.map;
      els.online.textContent = `${s.numplayers} / ${s.maxplayers}`;
      els.count.textContent = s.numplayers;
      els.max.textContent = s.maxplayers;
      
      els.fps.textContent = s.fps || '-';
      els.ent.textContent = s.entities_count ? Math.round(s.entities_count/1000) + 'K' : '0';
      els.size.textContent = s.world_size;
      
      els.wipe.textContent = formatDate(s.wipe);
      els.seed.textContent = s.world_seed;
      els.mode.textContent = s.gamemode;
      els.bots.textContent = s.bots;
      els.secure.textContent = s.secured ? 'Вкл' : 'Нет';
      
      els.desc.textContent = cleanText(s.description);
      els.update.textContent = new Date().toLocaleTimeString();
    }

    document.getElementById('refresh-btn').onclick = () => {
      const icon = document.querySelector('#refresh-btn i');
      icon.classList.add('fa-spin');
      fetchData().then(() => setTimeout(() => icon.classList.remove('fa-spin'), 500));
    };

    document.getElementById('copy-btn').onclick = () => {
      navigator.clipboard.writeText(els.ip.textContent);
      alert('IP скопирован!');
    };
    
    document.getElementById('connect-btn').onclick = () => {
       window.location.href = `steam://connect/${els.ip.textContent}`;
    };

    fetchData();
    setInterval(fetchData, 30000);
  </script>
</body>
</html>